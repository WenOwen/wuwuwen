# LightGBM æ¶¨è·Œæ–¹å‘é¢„æµ‹é…ç½®æ–‡ä»¶
# é¢„æµ‹ä»»åŠ¡ï¼šçœ‹å¤šï¼ˆä¸Šæ¶¨ï¼‰vs çœ‹ç©ºï¼ˆä¸‹è·Œï¼‰
# äºŒåˆ†ç±»ä»»åŠ¡ï¼šæ¶¨å¹…>0ä¸ºçœ‹å¤š(1)ï¼Œæ¶¨å¹…<=0ä¸ºçœ‹ç©º(0)

# ===========================================
# æ•°æ®é…ç½®
# ===========================================
data:
  # æ•°æ®è·¯å¾„é…ç½® - ç›´æŽ¥æŒ‡å‘professional_parquet
  data_dir: "./data/professional_parquet"
  
  # ç›´æŽ¥è®­ç»ƒé€‰é¡¹
  direct_training:
    enabled: true                    # å¯ç”¨ç›´æŽ¥è®­ç»ƒæ¨¡å¼
    data_format: "parquet"          # æ•°æ®æ ¼å¼
    stock_name_column: "name"       # è‚¡ç¥¨åç§°åˆ—
    target_column: "æ¶¨è·Œå¹…"          # ç”¨äºŽåˆ›å»ºæ–¹å‘é¢„æµ‹ç›®æ ‡
    prediction_mode: "direction"    # ðŸŽ¯ é¢„æµ‹æ¨¡å¼ï¼šdirection(æ–¹å‘) æˆ– regression(å›žå½’)
    exclude_columns:                # æŽ’é™¤çš„åˆ—ï¼ˆéžç‰¹å¾åˆ—ï¼‰
      - "name"                      # è‚¡ç¥¨åç§°ï¼ˆæ–‡æœ¬ï¼‰
      - "symbol"                    # è‚¡ç¥¨ä»£ç ï¼ˆæ ‡è¯†ç¬¦ï¼‰
      # æ³¨æ„ï¼šæ¶¨è·Œå¹…ä½œä¸ºç‰¹å¾ç”¨äºŽé¢„æµ‹æ¬¡æ—¥æ¶¨è·Œæ–¹å‘
    
  # æ•°æ®åŠ è½½é€‰é¡¹
  loading_options:
    encoding: "utf-8"
    validate_data: true
    
  # æ•°æ®é¢„å¤„ç†ï¼ˆç®€åŒ–ç‰ˆï¼‰
  preprocessing:
    # æ•°æ®æ ‡å‡†åŒ–ï¼ˆæŽ¨èä¿ç•™ï¼‰
    normalization:
      method: "robust"  # robustæ ‡å‡†åŒ–å¯¹å¼‚å¸¸å€¼æ›´é²æ£’
      
    # å¼‚å¸¸å€¼å¤„ç†ï¼ˆæŽ¨èä¿ç•™ï¼‰
    outlier_handling:
      enabled: true
      method: "winsorize"
      winsorize_limits: [0.01, 0.01]  # 1%å’Œ99%åˆ†ä½æ•°æˆªæ–­

# ===========================================
# è®­ç»ƒé…ç½®
# ===========================================
training:
  # æ•°æ®åˆ†å‰²
  data_split:
    test_size: 0.2
    validation_size: 0.1
    random_state: 42
    stratify: true                  # ðŸŽ¯ åˆ†ç±»ä»»åŠ¡ä½¿ç”¨åˆ†å±‚æŠ½æ ·
    # ðŸŽ¯ æ¬¡æ—¥é¢„æµ‹å¿…é¡»ä½¿ç”¨æ—¶é—´åºåˆ—åˆ†å‰²ï¼Œé¿å…æœªæ¥ä¿¡æ¯æ³„éœ²
    time_series_split: true
    
  # è®­ç»ƒå‚æ•°
  training_params:
    early_stopping_rounds: 100
    verbose: 10
    eval_metric: ["precision", "binary_logloss", "auc"]  # ðŸŽ¯ äºŒåˆ†ç±»è¯„ä¼°æŒ‡æ ‡

# ===========================================
# LightGBM æ¨¡åž‹å‚æ•°ï¼ˆäºŒåˆ†ç±»ï¼‰
# ===========================================
lightgbm:
  # åŸºç¡€å‚æ•°
  basic_params:
    objective: "binary"             # ðŸŽ¯ äºŒåˆ†ç±»ä»»åŠ¡
    metric: "auc"                   # ðŸŽ¯ AUCæŒ‡æ ‡
    boosting_type: "gbdt"
    num_leaves: 63
    learning_rate: 0.05
    feature_fraction: 0.8
    bagging_fraction: 0.8
    bagging_freq: 5
    verbose: -1
    random_state: 42
    
  # è¿›é˜¶å‚æ•°
  advanced_params:
    max_depth: 6
    min_data_in_leaf: 50
    min_gain_to_split: 0.1
    lambda_l1: 0
    lambda_l2: 1
    min_data_in_bin: 3
    bin_construct_sample_cnt: 200000
    
  # è®­ç»ƒå‚æ•°
  fit_params:
    num_boost_round: 1000

# ===========================================
# ç‰¹å¾é€‰æ‹©
# ===========================================
feature_selection:
  enabled: true
  methods:
    # åŸºäºŽé‡è¦æ€§çš„é€‰æ‹©
    importance_based:
      enabled: true
      threshold: 0.001  # é‡è¦æ€§é˜ˆå€¼
      
    # åŸºäºŽç›¸å…³æ€§çš„é€‰æ‹©
    correlation_based:
      enabled: true
      threshold: 0.95   # ç›¸å…³æ€§é˜ˆå€¼

# ===========================================
# è¶…å‚æ•°ä¼˜åŒ–ï¼ˆå¯é€‰ï¼‰
# ===========================================
hyperparameter_tuning:
  enabled: false  # å…ˆå…³é—­ï¼ŒåŠ å¿«è®­ç»ƒé€Ÿåº¦

# ===========================================
# è¾“å‡ºé…ç½®
# ===========================================
output:
  file_naming:
    identifier_type: "unique_id"
    unique_id_digits: 3
    folder_name_prefix: "direction_training"
    show_id_in_log: true
  
  model_save:
    save_dir: "./models/lightgbm_direction"
    model_name: "lightgbm_direction_model"
    save_format: ["pkl"]
    
  results_save:
    save_dir: "./results/lightgbm_direction"
    save_predictions: true
    save_feature_importance: true
    save_metrics: true
    save_visualizations: true      # ðŸŽ¨ å¯ç”¨å¯è§†åŒ–å›¾è¡¨
    
  logging:
    log_level: "INFO"
    log_file: "./logs/lightgbm_direction_training.log"
    console_output: true

# ===========================================
# è¯„ä¼°é…ç½®ï¼ˆäºŒåˆ†ç±»ï¼‰
# ===========================================
evaluation:
  # åˆ†ç±»é˜ˆå€¼è®¾å®š
  classification_threshold: 0.5     # äºŒåˆ†ç±»é˜ˆå€¼ï¼Œé»˜è®¤0.5
  
  metrics:
    - "auc"                    # AUC-ROC
    - "accuracy"               # å‡†ç¡®çŽ‡
    - "precision"              # ç²¾ç¡®çŽ‡
    - "recall"                 # å¬å›žçŽ‡
    - "f1_score"               # F1åˆ†æ•°
    - "log_loss"               # å¯¹æ•°æŸå¤±

# ===========================================
# å…¶ä»–é…ç½®
# ===========================================
misc:
  n_jobs: -1
  memory_optimization:
    enabled: true
    chunk_size: 10000
  random_seed: 42