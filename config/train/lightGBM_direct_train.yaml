# LightGBM æ¬¡æ—¥æ¶¨è·Œå¹…é¢„æµ‹é…ç½®æ–‡ä»¶
# é€‚ç”¨äºå·²ç»å¤„ç†å¥½çš„è‚¡ç¥¨æ•°æ®ï¼ˆå¦‚professional_parquetæ ¼å¼ï¼‰
# è·³è¿‡æ•°æ®é¢„å¤„ç†ï¼Œç›´æ¥è¿›è¡Œè®­ç»ƒ
# 
# ğŸ¯ é¢„æµ‹ä»»åŠ¡: ä½¿ç”¨ä»Šå¤©çš„æ‰€æœ‰ä¿¡æ¯é¢„æµ‹æ˜å¤©çš„æ¶¨è·Œå¹…
# - ä»Šå¤©çš„æ¶¨è·Œå¹…ã€ä»·æ ¼ã€äº¤æ˜“é‡ç­‰ä½œä¸ºç‰¹å¾
# - æ˜å¤©çš„æ¶¨è·Œå¹…ä½œä¸ºé¢„æµ‹ç›®æ ‡
# - ä½¿ç”¨æ—¶é—´åºåˆ—åˆ†å‰²ç¡®ä¿è®­ç»ƒæ•°æ®çš„æ—¶é—´æ­£ç¡®æ€§

# ===========================================
# æ•°æ®é…ç½®
# ===========================================
data:
  # æ•°æ®è·¯å¾„é…ç½® - ç›´æ¥æŒ‡å‘professional_parquet
  data_dir: "./data/professional_parquet"
  
  # ç›´æ¥è®­ç»ƒé€‰é¡¹
  direct_training:
    enabled: true                    # å¯ç”¨ç›´æ¥è®­ç»ƒæ¨¡å¼
    data_format: "parquet"          # æ•°æ®æ ¼å¼
    stock_name_column: "name"       # è‚¡ç¥¨åç§°åˆ—
    target_column: "æ¶¨è·Œå¹…"          # ç”¨äºåˆ›å»ºæ¬¡æ—¥é¢„æµ‹ç›®æ ‡
    exclude_columns:                # æ’é™¤çš„åˆ—ï¼ˆéç‰¹å¾åˆ—ï¼‰
      - "name"                      # è‚¡ç¥¨åç§°ï¼ˆæ–‡æœ¬ï¼‰
      - "symbol"                    # è‚¡ç¥¨ä»£ç ï¼ˆæ ‡è¯†ç¬¦ï¼‰
      # æ³¨æ„ï¼šæ¶¨è·Œå¹…ä½œä¸ºç‰¹å¾ç”¨äºé¢„æµ‹æ¬¡æ—¥æ¶¨è·Œå¹…
    
  # æ•°æ®åŠ è½½é€‰é¡¹
  loading_options:
    encoding: "utf-8"
    validate_data: true
    
  # æ•°æ®é¢„å¤„ç†ï¼ˆç®€åŒ–ç‰ˆï¼‰
  preprocessing:
    # æ•°æ®æ ‡å‡†åŒ–ï¼ˆæ¨èä¿ç•™ï¼‰
    normalization:
      method: "robust"  # robustæ ‡å‡†åŒ–å¯¹å¼‚å¸¸å€¼æ›´é²æ£’
      
    # å¼‚å¸¸å€¼å¤„ç†ï¼ˆæ¨èä¿ç•™ï¼‰
    outlier_handling:
      enabled: true
      method: "winsorize"
      winsorize_limits: [0.01, 0.01]  # 1%å’Œ99%åˆ†ä½æ•°æˆªæ–­

# ===========================================
# è®­ç»ƒé…ç½®
# ===========================================
training:
  # æ•°æ®åˆ†å‰²
  data_split:
    test_size: 0.2
    validation_size: 0.1
    random_state: 42
    stratify: false
    # ğŸ¯ æ¬¡æ—¥é¢„æµ‹å¿…é¡»ä½¿ç”¨æ—¶é—´åºåˆ—åˆ†å‰²ï¼Œé¿å…æœªæ¥ä¿¡æ¯æ³„éœ²
    time_series_split: true
    
  # è®­ç»ƒå‚æ•°
  training_params:
    early_stopping_rounds: 100
    verbose: 100
    eval_metric: ["rmse", "mae"]

# ===========================================
# LightGBM æ¨¡å‹å‚æ•°
# ===========================================
lightgbm:
  # åŸºç¡€å‚æ•°
  basic_params:
    objective: "regression"
    metric: "rmse"
    boosting_type: "gbdt"
    num_leaves: 63
    learning_rate: 0.05
    feature_fraction: 0.8
    bagging_fraction: 0.8
    bagging_freq: 5
    verbose: -1
    random_state: 42
    
  # è¿›é˜¶å‚æ•°
  advanced_params:
    max_depth: 6
    min_data_in_leaf: 50
    min_gain_to_split: 0.1
    lambda_l1: 0.1
    lambda_l2: 0.1
    min_data_in_bin: 3
    bin_construct_sample_cnt: 200000
    
  # è®­ç»ƒå‚æ•°
  fit_params:
    num_boost_round: 1000

# ===========================================
# ç‰¹å¾é€‰æ‹©
# ===========================================
feature_selection:
  enabled: true
  methods:
    # åŸºäºé‡è¦æ€§çš„é€‰æ‹©
    importance_based:
      enabled: true
      threshold: 0.001  # é‡è¦æ€§é˜ˆå€¼
      
    # åŸºäºç›¸å…³æ€§çš„é€‰æ‹©
    correlation_based:
      enabled: true
      threshold: 0.95   # ç›¸å…³æ€§é˜ˆå€¼

# ===========================================
# è¶…å‚æ•°ä¼˜åŒ–ï¼ˆå¯é€‰ï¼‰
# ===========================================
hyperparameter_tuning:
  enabled: false  # å…ˆå…³é—­ï¼ŒåŠ å¿«è®­ç»ƒé€Ÿåº¦

# ===========================================
# è¾“å‡ºé…ç½®
# ===========================================
output:
  file_naming:
    identifier_type: "unique_id"
    unique_id_digits: 3
    folder_name_prefix: "direct_training"
    show_id_in_log: true
  
  model_save:
    save_dir: "./models/lightgbm_direct"
    model_name: "lightgbm_direct_model"
    save_format: ["pkl"]
    
  results_save:
    save_dir: "./results/lightgbm_direct"
    save_predictions: true
    save_feature_importance: true
    save_metrics: true
    
  logging:
    log_level: "INFO"
    log_file: "./logs/lightgbm_direct_training.log"
    console_output: true

# ===========================================
# è¯„ä¼°é…ç½®
# ===========================================
evaluation:
  metrics:
    - "rmse"
    - "mae" 
    - "mape"
    - "r2_score"
    - "directional_accuracy"  # æ–¹å‘å‡†ç¡®ç‡

# ===========================================
# å…¶ä»–é…ç½®
# ===========================================
misc:
  n_jobs: -1
  memory_optimization:
    enabled: true
    chunk_size: 10000
  random_seed: 42